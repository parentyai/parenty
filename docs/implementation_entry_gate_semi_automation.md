# implementation_entry_gate_semi_automation（SSOT従属・非仕様 / Operational Design）

本書は仕様ではない。
本書は定義・権威・判断の正を持たない。
本書は SSOT / PolicyUxAdminMatrix / 下位仕様を変更・補完・再定義しない。
矛盾がある場合は、常に SSOT / PolicyUxAdminMatrix が優先される。
本書を根拠に実装・仕様変更・運用判断を行ってはならない。
本書単体で仕様判断してはならず、判断起点は PolicyUxAdminMatrix にあり、SSOT/Matrix が常に優先される。

前提条件
- `docs/ops/logs_preference_decision_db_spec.md` は Status: FROZEN。
- SSOTには参照導線のみ存在し、規範本文は移さない。
- 実装開始は「人＋CI＋lint」による複合ゲートで制御する。
- repo外ツール（GitHub Issues / Linear / Jira 等）は完全自動化できない前提で設計する。

---

## 背景

完全自動化ではなく半自動化とする理由は、実装開始の責任主体を人に固定し、例外判断と説明責任を残すためである。repo外ツールの必須添付・承認フローは機械的に完全検証できないため、設計上の制約として扱う。

---

## 説明

### 2-1. 半自動ゲートの全体像

半自動ゲートは「人間（チケット）」「CI / lint」「ドキュメント（FROZEN / Checklist）」の三層で構成する。人間は実装開始の責任主体としてチケット上の宣言と例外処理を担い、CI / lint はrepo内の検証可能項目を fail-fast で止める。ドキュメントはFROZEN設計とチェックリストの参照点として機械検証と人間確認の両方に使う。

### 2-2. 実装開始に必要な最低要件（宣言）

実装開始の最低要件は「宣言が存在すること」を基準とする。
- 実装チケットの存在
- FROZEN設計資料へのリンク
- チェックリスト All Yes の確認

宣言の正否は人間レビューで扱い、repo内の検証は宣言の有無に限定する。

### 2-3. repo内で自動検証できる範囲

repo内の自動検証は次の範囲に限定する。
- PRテンプレートで要求される項目の記載有無
- CI / lint が検証する対象
- FROZEN文書改変検知
- ゲート宣言の有無
- 検証できるが正否までは判断しない境界線を維持する

### 2-4. repo外で人手が必要な範囲

repo外の人手確認は次の範囲に限定する。
- Issues / Linear / Jira 側の必須添付
- 添付物の内容確認
- 例外承認（承認者・日時・場所の記録）

### 2-5. 例外フロー（最重要）

例外は暗黙不可とする。例外を扱う場合は必須要素として以下を含む。
- 例外理由
- 承認者
- 有効期限
- 期限切れ時の扱い（自動失効）

---

## 結論

半自動ゲートにより、FROZEN文書未参照やチェックリスト未達の実装開始を防げる。完全に防げないリスクは、チケットや例外承認の記録により露出させる。最終的な判断責任は人間が持つ。

---

## 補足

### A. 典型的な失敗パターン

- チケットはあるが中身が空
- リンク切れ
- FROZEN理解なしの実装開始

### B. 将来の完全自動化に進む場合の条件

- repo外APIが安定した場合
- 添付物の機械検証が可能になった場合
